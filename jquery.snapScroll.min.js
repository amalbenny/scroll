function SnapScroll(e){var t=this;e=$.extend({arrowKeys:!1,duration:600,easing:"swing",element:"html",ordered:!0,scrollBar:!0,onLeave:function(e,t){},onArrive:function(e,t){}},e);var n=$(e.element).find("[data-snap-point]");e.ordered||n.sort(function(e,t){var n=$(e).data("snapPoint"),o=$(t).data("snapPoint");return n<o?-1:n>o?1:0});var o=!1;this.isScrolling=function(){return o},this.scrollPrev=function(){var e=t.currentPoint();e>0&&t.scrollToPoint(e-1)},this.scrollNext=function(){var e=t.currentPoint();e<n.length-1&&t.scrollToPoint(e+1)},this.scrollToPoint=function(l,r){if(!o){o=!0;var i=t.currentPoint();if(!1===(r=$.extend({},e,r)).onLeave(i,l))return o=!1,!1;var c="html"===r.element?$(window).height():$(r.element).height(),a=$(n[l]).get(0).getBoundingClientRect(),s=(a.top+a.bottom)/2,u=c/2,h=("html"===r.element?$(window).scrollTop():$(r.element).scrollTop())+(s-u),f=$(r.element).get(0).scrollHeight;h=(h=h<u?0:h)>f-c?f-c:h;var v="html"===r.element?$("html, body"):$(r.element);$(v).animate({scrollTop:h},r.duration,r.easing,function(){o=!1,r.onArrive(i,l)})}},this.currentPoint=function(){var e=-1,t=$(window).height()/2,o=Math.pow(2,32)-1;return n.each(function(n){var l=$(this).get(0).getBoundingClientRect(),r=(l.top+l.bottom)/2,i=Math.abs(r-t);i<o&&(e=n,o=i)}),e},this.disable=function(){$(e.element).off("wheel mousewheel DOMMouseScroll"),$(e.element).off("touchstart"),$(e.element).off("touchmove"),$(window).off("keydown")},this.enable=function(){$(e.element).on("wheel mousewheel DOMMouseScroll",function(e){var n=e.originalEvent;(-n.deltaY||n.wheelDelta||-n.detail)>0?t.scrollPrev():t.scrollNext(),e.preventDefault()});var n,o;$(e.element).on("touchstart",function(e){o=e.originalEvent.touches[0].clientY,n=o}),$(e.element).on("touchmove",function(e){(o=e.originalEvent.touches[0].clientY)-n>0?t.scrollPrev():t.scrollNext(),n=o,e.preventDefault()}),e.arrowKeys&&$(window).on("keydown",function(e){var n=e.which;38===n?t.scrollPrev():40===n&&t.scrollNext()})},this.enable(),e.scrollBar?$(e.element).css("overflow-y","scroll"):$(e.element).css("overflow-y","hidden")}